<div class="w-full max-w-md my-24">
  <div class="border-b-2 border-bg-mitsuboshi-gray pb-3">
    <%= render 'spot_title', { spot: @spot } %>
  </div>
  <div class="px-5 py-5">
    <div class="mb-3">
      <p class="font-bold"><%= t('.address') %></p>
      <p class="py-2"><%= @spot.address %></p>
    </div>
    <div id="map"></div>
  </div>
  <div class="border-t-2 border-bg-mitsuboshi-gray">
    <div class="px-5 py-5">
      <p class="font-bold"><%= t('.equipment_details') %></p>
      <div class="pt-2">
        <% if @spot.equipment_details.present? %>
          <%= render 'equipment_tags', spot: @spot %>
        <% else %>
          <%= t('.none') %> 
        <% end %>
      </div>
    </div>
  </div>
  <% if logged_in? %>
    <div class="flex justify-center pb-5">
      <button class="btn nomal-btn"><%= t('defaults.edit') %></button>
    </div>
  <% end %>
  <%= render 'feedbacks/feedbacks', { spot: @spot, feedbacks: @feedbacks } %>
</div>
<section id="modalFormArea" class="modalFormArea">
  <div id="modalFormBg" class="modalFormBg"></div>
  <div class="modalFormWrapper">
    <div class="modalFormContents">
      <%= render 'feedbacks/form', { spot: @spot, feedback_form: @feedback_form } %>
    </div>
    <div id="closeModalForm" class="closeModalForm">
      <i class="fa-solid fa-x"></i>
    </div>
  </div>
</section>

<script>
  function initMap() {
    const mySpot= { lat: gon.spot.latitude, lng: gon.spot.longitude }
    const map = new google.maps.Map(document.getElementById("map"), {
      zoom: 15,
      center: mySpot,
    })
    const marker = new google.maps.Marker({
      position: mySpot,
      map: map,
    })
  }

  window.initMap = initMap

</script>

<script
  src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_MAPS_API_KEY'] %>&callback=initMap"
  defer
></script>

<style>
  #map {
    height: 300px;
    width: 100%;
  }
</style>
